@model SingleArticleViewModel

@{ var userId = User.GetId(); }

<div class="card">
    <div class="card-body">
        <div class="col-md-12 blogShort">
            <h1 class="text-center mt-2">@Model.Title</h1>
            <div class="row-md-4 mt-2">
                <ul>
                    <li><strong>Written by: </strong>@Model.Username</li>
                    <li><strong>Written on: </strong>@Model.CreatedOn</li>
                    <li><strong>Category: </strong> <a asp-controller="Blogs" asp-action="@Model.CategoryName">@Model.CategoryName</a></li>          
                </ul>
            </div>
            <div class="row-md-4 text-left mt-2">
                <img src="@Model.ImagePath" alt="post img" class="pull-left img-responsive postImg img-thumbnail margin10" width="700">
            </div>
            <div class="row-md-4 mt-2">
                <div class="card">
                    <div class="card-body">
                        <article>
                            @Model.Content
                        </article>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@*<div class="card mt-3">
        <div class="card-body">
            <h6 class="d-flex align-items-center mb-3"><i class="material-icons text-info mr-2">about me</i></h6>
            <small>@Model.AboutMe</small>
        </div>
    </div>*@


@if (userId == Model.UserId || User.IsInRole("Administrator"))
{
<div class="text-center">
    <form method="post" asp-controller="Articles" asp-action="Delete" id="deleteForm" asp-route-id="@Model.Id"></form>
    <button class="btn btn-danger mt-3" data-toggle="modal" data-target="#deleteModal">Delete</button>
</div>}

    </div>

<div class="modal" tabindex="-1" role="dialog" id="deleteModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <p>Are you sure you want to remove "@Model.Title" from your articles ?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="deleteForm.submit()">Yes</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
            </div>
        </div>
    </div>
</div>

